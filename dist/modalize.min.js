/*
 * Modalize - v0.0.1
 * Lightweight, responsive, fast, fully customizable modal plugin. Call your modals by url hash.
 * https://github.com/dominicrico/modalize
 *
 * Made by Dominic Rico-Gomez
 * Under MIT License
 */

!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(c){return b(a,c)}):"object"==typeof exports?b(a,require("jquery")):b(a,a.jQuery||a.Zepto)}(this,function(a,b){"use strict";function c(){for(var a=r,b=0;b<arguments.length;b++)a+="-"+arguments[b];return a}function d(a){if(x&&"none"===a.css("animation-name")&&"none"===a.css("-ms-animation-name")&&"none"===a.css("-o-animation-name")&&"none"===a.css("-moz-animation-name")&&"none"===a.css("-webkit-animation-name"))return 0;var b=a.css("animation-duration")||a.css("-ms-animation-duration")||a.css("-o-animation-duration")||a.css("-moz-animation-duration")||a.css("-webkit-animation-duration")||"0s",c=a.css("animation-delay")||a.css("-ms-animation-delay")||a.css("-o-animation-delay")||a.css("-moz-animation-delay")||a.css("-webkit-animation-delay")||"0s",d=a.css("animation-iteration-count")||a.css("-ms-animation-iteration-count")||a.css("-o-animation-iteration-count")||a.css("-moz-animation-iteration-count")||a.css("-webkit-animation-iteration-count")||"1";b=b.split(", "),c=c.split(", "),d=d.split(", ");for(var e,f=Number.NEGATIVE_INFINITY,g=0;g<b.length;g++)e=parseFloat(b[g])*parseFloat(d[g],10)+parseFloat(c[g]),e>f&&(f=e);return e}function e(a,c){var d=["$bg","$overlay","$wrapper","$modal"];b.each(d,function(b,d){a[d].off(c)})}function f(a,c,d){var e=["$bg","$overlay","$wrapper","$modal"];b.each(e,function(b,e){a[e].on(c,d)})}function g(a){var c,d=a.$modal.find("."+o+"-tabs ul li");a.$modal.find("."+o+"-tabs [data-"+o+"-tab]").hide(),a.$modal.find("."+o+"-tabs [data-"+o+"-tab]:first").show(),b.each(d,function(d,e){c=b(e),void 0!==c.data(o+"-show")&&c.on("click",function(c){c.preventDefault();var d=b(c.currentTarget);a.$modal.find("."+o+"-tabs ."+o+"-tab").hide(),a.$modal.find("."+o+"-tabs [data-"+o+"-tab="+d.data(o+"-show")+"]").show()})})}function h(){if(b(document.body).height()<=b(window).height())return 0;var a,c,d=document.createElement("div"),e=document.createElement("div");return d.style.visibility="hidden",d.style.width="100px",d.style.overflow="scroll",e.style.width="100%",document.body.appendChild(d),d.appendChild(e),c=d.offsetWidth,a=e.offsetWidth,d.parentNode.removeChild(d),c-a}function i(a){var d,e,f=b("html"),g=c("locked");a?f.hasClass(g)||(e=b(document.body),d=parseInt(e.css("padding-right"),10)+h(),e.css("padding-right",d+"px"),f.addClass(g)):f.hasClass(g)&&(e=b(document.body),d=parseInt(e.css("padding-right"),10)-h(),e.css("padding-right",d+"px"),f.removeClass(g))}function j(a,b,d,e){var f=c("is",b),g=[c("is",v.closing),c("is",v.closed),c("is",v.opening),c("is",v.opened)].join(" ");a.$bg.removeClass(g).addClass(f),a.$overlay.removeClass(g).addClass(f),a.$wrapper.removeClass(g).addClass(f),a.$modal.removeClass(g).addClass(f),a.state=b,!d&&a.$modal.trigger({type:b,reason:e},[{reason:e}])}function k(a,b,c){var g=0,h=function(a){a.target===this&&g++},i=function(a){a.target===this&&0===--g&&(e(c,s+" "+t),b())};f(c,s,h),f(c,t,i),a(),0===d(c.$bg)&&0===d(c.$overlay)&&0===d(c.$wrapper)&&0===d(c.$modal)&&(e(c,s+" "+t),b())}function l(a){a.state!==v.closed&&(e(a,s+" "+t),a.$bg.removeClass(a.settings.mods),a.$overlay.removeClass(a.settings.mods).hide(),a.$wrapper.hide(),i(!1),j(a,v.closed,!0))}function m(){var a,c,d=window.location.hash.replace("#","");if(d){try{c=b("[data-"+o+"-id="+d.replace(new RegExp("/","g"),"\\/")+"]")}catch(e){}c&&c.length&&(a=b[o].lookup[c.data(o)],a&&a.settings.trackUrlHash&&a.open())}else p&&p.state===v.opened&&p.settings.trackUrlHash&&p.close()}function n(a,d){var e=b(document.body),f=this;f.settings=b.extend({},u,d),f.index=b[o].lookup.push(f)-1,f.state=v.closed,f.$overlay=b("."+c("overlay")),f.$overlay.length||(f.$overlay=b("<div>").addClass(c("overlay")+" "+c("is",v.closed)).hide(),e.append(f.$overlay)),f.$bg=b("."+c("bg")).addClass(c("is",v.closed)),f.$modal=a.addClass(r+" "+c("is-initialized")+" "+f.settings.mods+" "+c("is",v.closed)).attr("tabindex","-1"),f.$wrapper=b("<div>").addClass(c("wrapper")+" "+f.settings.mods+" "+c("is",v.closed)).hide().append(f.$modal),e.append(f.$wrapper),f.$wrapper.on("click."+r,"[data-"+o+'-action="close"]',function(a){a.preventDefault(),f.close()}),f.$wrapper.on("click."+r,"[data-"+o+'-action="cancel"]',function(a){a.preventDefault(),f.$modal.trigger(w.CANCEL),f.settings.closeOnCancel&&f.close(w.CANCEL)}),f.$wrapper.on("click."+r,"[data-"+o+'-action="confirm"]',function(a){a.preventDefault(),f.$modal.trigger(w.CONFIRM),f.settings.closeOnConfirm&&f.close(w.CONFIRM)}),f.$wrapper.on("click."+r,function(a){b(a.target).hasClass(c("wrapper"))&&f.settings.closeOnOuterClick&&f.close()})}var o="modalize";b[o]={lookup:[]};var p,q,r=a.MODALIZE_GLOBALS&&a.MODALIZE_GLOBALS.NAMESPACE||o,s=b.map(["animationstart","webkitAnimationStart","MSAnimationStart","oAnimationStart"],function(a){return a+"."+r}).join(" "),t=b.map(["animationend","webkitAnimationEnd","MSAnimationEnd","oAnimationEnd"],function(a){return a+"."+r}).join(" "),u=b.extend({trackUrlHash:!0,closeOnConfirm:!0,closeOnCancel:!0,closeOnEsc:!0,closeOnOuterClick:!0,mods:""},a.MODALIZE_GLOBALS&&a.MODALIZE_GLOBALS.DEFAULTS),v={closing:"closing",closed:"closed",opening:"opening",opened:"opened"},w={CONFIRM:"confirmation",CANCEL:"cancellation"},x=function(){var a=document.createElement("div").style;return void 0!==a.animationName||void 0!==a.WebkitAnimationName||void 0!==a.MozAnimationName||void 0!==a.msAnimationName||void 0!==a.OAnimationName}();n.prototype.open=function(){var a,c,d=this;d.state!==v.opening&&d.state!==v.closing&&(a=d.$modal.attr("data-"+o+"-id"),a&&d.settings.trackUrlHash&&(q=b(window).scrollTop(),location.hash=a),p&&p!==d&&l(p),p=d,i(!0),d.$bg.addClass(d.settings.mods),d.$overlay.addClass(d.settings.mods).show(),d.$wrapper.show().scrollTop(),d.$modal.focus(),d.$modal.find("."+o+"-ajax").length&&(c=d.$modal.find("."+o+"-ajax").data(o+"-ajax"),b.ajax({async:!1,method:"GET",url:c,success:function(a){d.$modal.find("."+o+"-ajax").html(a)},error:function(a){d.$modal.find("."+o+"-ajax").html("<span>Ooops... Something went completly wrong! Sorry!</span>")}})),d.$modal.find("."+o+"-tabs").length&&g(d),k(function(){j(d,v.opening)},function(){j(d,v.opened)},d))},n.prototype.close=function(a){var c=this;c.state!==v.opening&&c.state!==v.closing&&(c.settings.trackUrlHash&&c.$modal.attr("data-"+o+"-id")===window.location.hash.substring(1)&&(window.location.hash="",b(window).scrollTop(q)),c.$bg.addClass(c.settings.mods),c.$overlay.addClass(c.settings.mods).show(),c.$wrapper.show().scrollTop(),c.$modal.focus(),k(function(){j(c,v.closing)},function(){c.$bg.removeClass(c.settings.mods),c.$overlay.removeClass(c.settings.mods).hide(),c.$wrapper.hide(),i(!1),j(c,v.closed,!1,a)},c))},n.currentState=function(){return this.state},n.destroy=function(){var a,d=b[o].lookup;l(this),this.$wrapper.remove(),delete d[this.index],a=b.grep(d,function(a){return!!a}).length,0===a&&(this.$overlay.remove(),this.$bg.removeClass(c("is",v.closing)+" "+c("is",v.closed)+" "+c("is",v.opening)+" "+c("is",v.opened)))},b.fn[o]=function(a){var c,d;return this.each(function(e,f){d=b(f),null==d.data(o)?(c=new n(d,a),d.data(o,c.index),c.settings.trackUrlHash&&d.attr("data-"+o+"-id")===window.location.hash.substr(1)&&c.open()):c=b[o].lookup[d.data(o)]}),c},b(document).ready(function(){var a=b(document);a.on("click","[data-"+o+"-target]",function(a){a.preventDefault();var c=a.currentTarget,d=c.getAttribute("data-"+o+"-target"),e=b("[data-"+o+"-id="+d+"]");b[o].lookup[e.data(o)].open()}),a.on("keydown."+r,function(a){p&&p.settings.closeOnEsc&&p.state===v.opened&&27===a.keyCode&&p.close()}),b(window).on("hashchange."+r,m),a.find("."+r).each(function(a,c){var d=b(c);d[o]()})})});